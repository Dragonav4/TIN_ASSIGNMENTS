<%- include('../layouts/header', { title: 'Delete game' }) %>

<%
const genres = locals.genres || [];
const matchedGenre = genres.find(g => String(g.id) === String(game.genre_id)); //find genre(string) by id
const genreName = matchedGenre ? matchedGenre.name : '—';
%>

<h1>Delete game</h1>

<div class="surface" data-tone="danger">
    <p>Are you sure you want to delete this game?</p>
    <ul>
        <li><strong>Title:</strong> <%= game.title %></li>
        <li><strong>Platform:</strong> <%= game.platform %></li>
        <li><strong>Status:</strong> <%= game.status %></li>
        <li><strong>Genre:</strong> <%= genreName %></li>
        <li><strong>Rating:</strong> <%= game.rating == null ? '—' : game.rating %></li>
    </ul>
</div>

<form method="POST" action="/games/<%= game.id %>/delete" class="row" data-spacing="actions">
    <button type="submit" name="confirm" value="yes" class="btn" data-variant="danger">
        Yes, delete game
    </button>
    <button type="submit" name="confirm" value="no" class="btn">
        No
    </button>
    <a href="/games" class="btn" data-variant="ghost">Back to list</a>
</form>

<%- include('../layouts/footer') %>
